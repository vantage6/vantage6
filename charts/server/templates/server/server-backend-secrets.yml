{{- if not (lookup "v1" "Secret" (.Values.namespace | default .Release.Namespace) (printf "%s-server-secrets" .Release.Name)) }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ .Release.Name }}-server-secrets
  namespace: {{ .Values.namespace | default .Release.Namespace }}
data:
  KEYCLOAK_ADMIN_USERNAME: {{ .Values.server.keycloakAdminUsername | b64enc }}
  KEYCLOAK_ADMIN_PASSWORD: {{ .Values.server.keycloakAdminPassword | b64enc }}
  KEYCLOAK_ADMIN_CLIENT: {{ .Values.server.keycloakAdminClient | b64enc }}
  KEYCLOAK_ADMIN_CLIENT_SECRET: {{ .Values.server.keycloakAdminClientSecret | b64enc }}
  KEYCLOAK_USER_CLIENT: {{ .Values.server.keycloakUserClient | b64enc }}
  KEYCLOAK_USER_CLIENT_SECRET: {{ .Values.server.keycloakUserClientSecret | b64enc }}
{{- end }}