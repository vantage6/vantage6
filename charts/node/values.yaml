# Optional, by default the Release.Namespace is used
# namespace: vantage6-node
node:

  name: put-your-node-name-here
  apiKey: put-your-api-key-here

  server:
    # TODO set the url/port directly on node-configmap.yaml using {{ .Release.Name }}-vantage6-server-service
    url: http://vantage6-server-vantage6-server-service
    port: 7601
    path: /server

  image: harbor2.vantage6.ai/infrastructure/node:latest

  logging:
    level: INFO

  proxyPort: 7654

  # Persistence configuration, these settings are both used for the file based databases
  # and the task directory.
  persistence:
    tasks:
      storageClass: local-storage
      size: 10Gi
      hostPath: /tmp/vantage6/tasks
    database:
      storageClass: local-storage
      size: 5Gi

  # It is also possible not to specify the details of the service-based databases
  # here. The node will then automatically detect the databases in the environment
  # variables. This allows parent charts to specify the databases in their own
  # values.yaml file or define them runtime using the CLI.
  #
  # In this case, the node expects the following environment variables to be set:
  #
  # DATABASE_LABELS: comma-separated list of database labels
  # DATABASE_[LABEL]_URI: URI of the database
  # DATABASE_[LABEL]_TYPE: type of the database
  #
  # Optionally, you can also specify additional environment variables for each
  # database by setting the DATABASE_[LABEL]_SOME_OTHER_KEY variable.
  #
  # DATABASE_[LABEL]_SOME_OTHER_KEY: some_other_value
  #
  # It is recommended to do this through Kubernetes secrets. If you specify the
  # details here, secrets will be used. File-based databases are automatically made
  # available to your node.
  databases:
    fileBased:
    - name: default
      # /run/desktop/
      uri: /mnt/data/olympic_athletes_2016.csv
      type: csv
      volumePath: /mnt/data
      originalName: olympic_athletes_2016.csv
    serviceBased:
    # Name is the LABEL in the DATABASE_LABELS variable
    - name: myPostgres
      uri: postgres://vantage6-postgres:5432/vantage6
      type: other

      # The env is the DATABASE_[LABEL]_SOME_OTHER_KEY variable. So in this example
      # case, the node will set the DATABASE_MYPOSTGRES_USER and
      # DATABASE_MYPOSTGRES_PASSWORD environment variables.
      env:
        USER: vantage6
        PASSWORD: vantage6

  # Kubernetes configuration
  taskNamespace: vantage6-tasks

  # Kubernetes node name, used for local persistent volumes
  k8sNodeName: docker-desktop

